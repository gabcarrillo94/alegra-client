
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/html">
    <head>
                    <meta http-equiv="X-UA-Compatible" content="chrome=1">
        <meta http-equiv="Content-Type" content="text/html" charset="utf-8" />
        <link rel="stylesheet" type="text/css" href="https://cdn1.alegra.com/long-term/compressed/ext-theme-gray-all2.css"/>
        <link type="image/x-icon" rel="shortcut icon" href="https://cdn1.alegra.com/images/favicon.ico"/>
        <link rel="stylesheet" type="text/css" href="https://cdn1.alegra.com/public/79e96c18230e14040e2cc42fac101187/compressed/styles-min.css" />

                                <script type="text/javascript">
            var translate = function (str, upperCase) {
                var translateArray = [];
                translateArray = {"category":"categor\u00eda","categories":"categor\u00edas","phone":"tel\u00e9fono","identification":"identificaci\u00f3n","identificationType":"tipo de identificaci\u00f3n","theIdentification":"la","thisIdentification":"esta","inventory":"inventario","items":"items","item":"\u00edtem","journal":"ajuste de categor\u00eda","recurring":"recurrente","recurringPlural":"recurrentes","transaction":"transacci\u00f3n","transactions":"transacciones","transactionIn":"recibo de caja","transactionOut":"comprobante de egreso","transactionsIn":"recibos de caja","transactionsOut":"comprobantes de egreso","client":"contacto","clients":"contactos","creditNote":"nota cr\u00e9dito","creditNotes":"notas cr\u00e9dito","debitNote":"nota d\u00e9bito","debitNotes":"notas d\u00e9bito","estimate":"cotizaci\u00f3n","estimates":"cotizaciones","bill":"factura de proveedor","bills":"facturas de proveedor","invoice":"factura de venta","invoices":"facturas de venta","salesReport":"reporte de ventas","invoicesOpen":"reporte de cuentas por cobrar","billsOpen":"reporte de cuentas por pagar","salesByClient":"reporte de ventas por cliente","salesByItem":"reporte de ventas por item","report606":"reporte 606","report607":"reporte 607","invoicesByFreeCompanies":"facturas creadas por compa\u00f1ias gratis","associatedRemission":"asociada","includedRemission":"incluida","otherInvoice":"otra","accessLog":"log de acceso","metadataByCompanies":"metadatos de las compa\u00f1\u00edas","categoryTransactions":"transacciones de la categor\u00eda","companiesAdmin":"reporte compa\u00f1\u00edas","advance":"anticipo","advances":"anticipos","letter":"carta","half-letter":"media carta","ticket":"tirilla","mobilePhone":"celular","address":"direcci\u00f3n","reference":"referencia","theReference":"la","name":"nombre","theName":"el","CreditCard":"Tarjeta de cr\u00e9dito","DebitCard":"Cuenta bancaria","DebitCreditCard":"Tarjeta bancaria","Cash":"Efectivo","AMERICAN_EXPRESS":"American express","VISA":"Visa","MASTERCARD":"Mastercard","SAVINGS":"Cuenta de ahorros","CURRENT":"Cuenta corriente","remission":"remisi\u00f3n","remissions":"remisiones","theRemission":"la","theRemissions":"las","aRemission":"una","aRemissions":"una","associatedRemissions":"remisiones asociadas","newRemission":"nueva remisi\u00f3n","firstRemission":"primera remisi\u00f3n","ofTheRemission":"de la","remissionSent":"enviada","remissionsExport":"exportadas","prefix":"prefijo","number":"n\u00famero","thePrefix":"el","numeration":"numeraci\u00f3n","numerations":"numeraciones","resolutionText":"resoluci\u00f3n","automaticNumeration":"numeraci\u00f3n autom\u00e1tica","purchaseOrder":"orden de compra","purchaseOrders":"\u00f3rdenes de compra","newPurchaseOrder":"nueva orden de compra","retention":"retenci\u00f3n","retentions":"retenciones","customfield":"atributo adicional","customfields":"atributos adicionales","department":"departamento","city":"ciudad","district":"municipio","urbanization":"barrio","pdf.account":"cuenta","pdf.address":"direcci\u00f3n","pdf.categories":"categor\u00edas","pdf.categoryTitle":"concepto","pdf.categoryTotal":"valor","pdf.city":"ciudad","pdf.clientName":"se\u00f1or(es)","pdf.creditNote":"nota cr\u00e9dito","pdf.discount":"descuento","pdf.documentDate":"fecha","pdf.documentDeliveryDate":"fecha de entrega","pdf.documentDueDate":"fecha de vencimiento","pdf.documentExpeditionDate":"fecha de expedici\u00f3n","pdf.estimate":"cotizaci\u00f3n","pdf.identification":"identificaci\u00f3n","pdf.item":"\u00edtem","pdf.itemPrice":"precio","pdf.number":"n\u00famero","pdf.numberUndefined":"indefinido","pdf.paymentMethod":"m\u00e9todo de pago","pdf.phone":"tel\u00e9fono","pdf.phoneShort":"tel","pdf.price":"precio","pdf.purchaseOrder":"orden de compra","pdf.quantity":"cantidad","pdf.remission":"remisi\u00f3n","pdf.retentions":"retenciones","pdf.serviceOrder":"orden de servicio","pdf.signatureMadeBy":"elaborado por","pdf.signatureSignedBy":"aceptada, firma y\/o sello y fecha","pdf.subSubTotal":"subtotal","pdf.subTotal":"subtotal","pdf.transactionIn":"recibo de caja","pdf.transactionOut":"comprobante de egreso","pdf.total":"total","statement":"estado de cuenta cliente","documentType":"tipo de documento","creation":"creaci\u00f3n","due":"vencimiento","overdueDays":"d\u00edas vencidos","status":"estado","total":"total","amountPaid":"pagado","totalPaid":"total pagado","balance":"saldo","missingAmount":"por pagar","actions":"acciones","unapplied":"por aplicar","unpaid":"por pagar","paid":"pagado","checkingPayment":"verificando pago","footerStatement":"Con Alegra Ganas Tiempo y Tranquilidad","discover":"descubre","messageWithoutResults":"El cliente no tiene documentos asociados","results":"resultados","withFilters":"con filtros","helpText":"si necesitas ayuda para ver el estado de cuenta haz clic","notifyPayment":"notificar pago","notificationPaid":"notificaci\u00f3n pago","alreadyPaid":"\u00bfYa has pagado este documento?","yourEmail":"tu correo","emailSendNotification":"correo de quien env\u00eda la notificaci\u00f3n","send":"enviar","viewDocument":"ver documento","providerPayments":"payU","externalPayments":"pagos en l\u00ednea","anErrorOcurred":"Ha ocurrido un error","invalidAccess":"Acceso invalido","transactionState":"Estado de la transacci\u00f3n","pay":"pagar en l\u00ednea","brokenLink":"tu enlace caduc\u00f3","expiredLink":"si quieres saber m\u00e1s acerca del estado de cuenta cliente haz clic","requestNewLink":"generar uno nuevo","here":"aqu\u00ed","subject":"asunto","message":"mensaje","email":"correo","overdueLessThan30":"vencidas 30 d\u00edas o menos","overdueBetween30":"vencidas 31 d\u00edas a 60 d\u00edas","overdueBetween60":"vencidas 61 d\u00edas a 90 d\u00edas","overdueMore91":"vencidas 91+","notOverdue":"no vencidas","newWarehouse":"nueva bodega","newWarehouses":"nuevas bodegas","warehouse":"bodega","warehouses":"bodegas","firstWarehouse":"primera bodega","theWarehouse":"la","aWarehouse":"una","sameWarehouse":"misma bodega","theAssociatedWarehouse":"la bodega asociada","toTheWarehouse":"a la bodega","otherWarehouse":"otra bodega","openCreditNote":"abierta","voidCreditNote":"anulada","openJournal":"abierto","voidJournal":"anulado","associatedCreditNotes":"asociadas","appliedCreditNotes":"aplicadas","stamp":"emitir","stamped":"emitido","stampedInvoice":"emitida","stampedCreditNote":"emitida","stampedInvoices":"emitidas","stampedCreditNotes":"emitidas","pastStamp":"emiti\u00f3","theGovernmentEntity":"la","governmentEntity":"entidad gubernamental","electronicNumeration":"numeraci\u00f3n electr\u00f3nica","stampDocuments":"comprobantes electr\u00f3nicos","identificationCompany":"identificaci\u00f3n","theIdentificationCompany":"la","newInvoice":"nueva","theInvoice":"la","theInvoices":"las","invoiceHalf":"factura","invoicesHalf":"facturas","ofTheInvoice":"de la","ofTheInvoices":"de las","anInvoice":"una","openInvoice":"abierta","openInvoices":"abiertas","closedInvoice":"cerrada","voidInvoice":"anulada","recurringInvoices":"facturas recurrentes","invoiceEmailed":"enviada","toTheInvoice":"a la "};
                var translatedString = translateArray[str];
                if (!translatedString) {
                    translatedString = str;
                }
                if (upperCase) {
                    translatedString = translatedString.charAt(0).toUpperCase() + translatedString.slice(1);
                }
                return translatedString;
            };
        </script>
        <script type="text/javascript" src="https://cdn1.alegra.com/long-term/compressed/Big.min.js"></script>
        <script type="text/javascript" src="https://cdn1.alegra.com/long-term/compressed/ext-all.js"></script>
                    <script type="text/javascript" src="https://cdn1.alegra.com/public/79e96c18230e14040e2cc42fac101187/compressed/app-all.js"></script>
                
        <script type="text/javascript" src="https://cdn1.alegra.com/long-term/compressed/ext-lang-es.js"></script>
        <script>
			AL.config.EMAIL = 'gabcar12@hotmail.com';
			AL.config.TOKEN = '';
            AL.config.idCompany = 106783;
            AL.config.decimalPrecision = 2;
            AL.config.currentKeyCountry = 'other';
            var applyFormat = function () {
                /* Configuaración de separador decimal y fechas */
                Ext.apply(Ext.util.Format, {
                    thousandSeparator: ',',
                    decimalSeparator: '.',
                    currencySign: '$',
                    // Spanish Euro
                    dateFormat: 'd/m/Y'

                });

                Ext.util.Format.usMoney = function (value, precision, currencySign) {
                    var endSign = false;
                    var sign = currencySign ? currencySign : null;

                    if (sign) {
                        if (sign == '€') {
                            endSign = true;
                        }
                    } else {
                        if ('$' == '€') {
                            endSign = true;
                        }
                    }
                    precision = parseInt(precision);
                    /*
                     * Toca verificar que la precisión sea un número mayor o igual a
                     * cero
                     */
                    var decimalPrecision = (precision === 0 || precision > 0) ? precision : AL.config.decimalPrecision;

                    value = AL.math.approx(value, null, decimalPrecision);

                    return Ext.util.Format.currency(value, sign, decimalPrecision, endSign);
                };
                /* Termina configuración decimal y de fechas */
            };
            applyFormat();
            Ext.onReady(function () {
                Ext.define("Ext.locale.es.form.field.Number", {
                    override: "Ext.form.field.Number",
                    decimalSeparator: ".",
                    decimalPrecision: 2
                });

                applyFormat();
            });



            /*
             * suspendEvents de sencha no funciona correctamente, por lo que se
             * tiene que arreglar aquí.   Para ver más sobre este caso mirar issue de
             * jira #4359
             */
            /**
             * @class Ext.override.app.EventDomain
             * @override Ext.app.EventDomain
             * Override for MVC Controllers to support suspendEvents.
             */
            Ext.define('Ext.override.app.EventDomain', {
                override: 'Ext.app.EventDomain',
                /**
                 * @inheritdoc
                 */
                constructor: function () {
                    this.callParent(arguments);
                    this.eventQueue = {};
                },
                /**
                 * @inheritdoc
                 */
                monitor: function (observable) {
                    this.callParent(arguments);
                    this.applyPrototypeMembers(observable);
                },
                /**
                 * Override prorotype functions
                 * @param {Ext.util.Observable/Ext.Class} observable
                 * @private
                 */
                applyPrototypeMembers: function (observable) {
                    var domain = this,
                        prototype = observable.isInstance ? observable : observable.prototype,
                        resumeEvents = prototype.resumeEvents;

                    prototype.resumeEvents = function (ev, args) {
                        var ret = resumeEvents.apply(this, arguments);

                        domain.resumeQueuedEvents(this);

                        return ret;
                    };
                },
                /**
                 * @inheritdoc
                 */
                dispatch: function (target, ev, args) {
                    // don't dispatch if suspended
                    if (target.eventsSuspended) {
                        // Queue them when queued via target.suspendEvents(true)
                        if (!!target.eventQueue) {
                            target.domainEventQueue = target.domainEventQueue || [];
                            target.domainEventQueue.push([target, ev, args]);
                        }
                        return true;
                    }
                    return this.callParent(arguments);
                },
                /**
                 * Called every resumeEvents on an Observable.
                 * Fire queued events if available.
                 * @private
                 */
                resumeQueuedEvents: function (target) {
                    var me = this,
                        queue = target.domainEventQueue,
                        i = 0,
                        len;
                    if (queue)
                        for (len = queue.length; i < len; i++)
                            me.dispatch.apply(me, queue[i]);
                    delete target.domainEventQueue;
                }
            }, function () {
                var type,
                    inst = Ext.app.EventDomain.instances,
                    i,
                    len;
                for (type in inst)
                    if (inst.hasOwnProperty(type)) {
                        inst[type].eventQueue = {};
                        for (i = 0, len = inst[type].monitoredClasses.length; i < len; i++)
                            inst[type].applyPrototypeMembers(inst[type].monitoredClasses[i]);
                    }
            });
        </script>

		<style>
			#submit-add-contact-btnWrap {
				
			}
		</style>

                <title>Nuevo contacto</title>                

    </head>
    <body id="contact-create">
            
        <div class="main-container">
            <div style=" " class="header-wrapper">
                                <div id="hints-wrapper-top">
                        <div class="hint" style="background-color: #008e79; border-color: #4aa37d; ">
        <div class="header">
                            <div class="title"><h1 style ="color:#f8f4e8 ;">Hemos actualizado nuestros términos y condiciones y política de tratamiento de datos.</h1></div>
            
        </div>
        <div class="content">
            <div class="text" style="color: #f8f4e8; float: left;">Al continuar usando la aplicación aceptas estas nuevas políticas.</div>
        </div>
        <div class="footer" style="float : right; color: #f8f4e8 ">
                                        <a href="https://www.alegra.com/terminos-y-condiciones" target="_blank" style="float : right; color: #f8f4e8">Ver más</a>
                    </div>
        <div class="closeButton" data-hint-id="287" style="color: #f8f4e8 ">x</div>
    </div>
                </div>

                <header style="">
                    <div class="logo" style="float:left; margin-top: 15px; margin-left:7px; margin-bottom: 3px;">

                                                    <a href="/">
                                <img src="https://cdn1.alegra.com/images/logo_alegra.png" style="width: 178px" />
                            </a>
                                            </div>
                </header>
                                    <div id="app-contact-phone" style="height: 9px; width: 1024px; margin: 0 auto; position: relative; top: -23px; display: none;"></div>
                
               <nav style="position: relative;">
                    <div style="width:1024px; margin: 0 auto">
                        <ul id="nav1" class="primary">
							<li class=" active active hasSubmenu ">
								<a href="index.html">Contactos</a>
								<ul class="secondary">
									<li id="contact-all">
										<a href="index.html">Todos</a>
									</li>
									<li id="contact-client">
										<a href="index.html?l=view-clients">Clientes</a>
									</li>
									<li id="contact-provider">
										<a href="index.html?l=view-providers">Proveedores</a>
									</li>
								</ul>
							</li>
						</ul>
                    </div>
                </nav>
            </div>

            <div id="notification-wrapper"></div>
            <div class="main-wrapper">
                                <div class="main-content">
                    <div id="hints-wrapper">
                                            </div>
                    <script>MenuManager.activateSubMenuByText('Todos');</script><div class="section-wrapper">
    <div class="header">
        <div class="title"><h1>Nuevo contacto</h1></div>
        <div class="actions"></div>
    </div>
    <div class="content"></div>
</div>
<div id="generalContainer">
    <div id="addClient"></div>
    <div class='required-anotation'>Los campos marcados con <span class='req no-padding'>*</span> son obligatorios</div>
</div>

<div id="addContact"></div>
<script>

    var tip = Ext.create('Ext.tip.ToolTip', {
        target: 'tooltip_notifications',
        html: 'Press this button to clear the form'
    });

	Ext.application({
        name: 'AL',
        appFolder : '/js/app/app',
        controllers: ['Client'],
        launch: function() {

		var url = new URL(location.href );
		var id = url.searchParams.get("id");
		var obj;

		if(id) {
			Ext.Ajax.request({
				headers: {'authorization' : 'Basic ' + btoa(AL.config.EMAIL + ':' + AL.config.TOKEN)},
				url: 'https://app.alegra.com/api/v1/contacts/' + id,
				method: 'GET',
				success: function(conn, response, options, eOpts) {
					contact = JSON.parse(conn.responseText)["0"];
				
					Ext.create('Ext.form.Panel', {
					bodyStyle: 'padding: 30px;padding-left: 200px;',
					xtype: 'form',
					header: false,
					renderTo: 'addClient',
					layout:'column',
					url: 'https://app.alegra.com/api/v1/contacts',
					defaults: {
						  xtype: 'container',
						  anchor: '100%'
					   },
					defaultType: 'textfield',
					items:[{
						items: [{
							xtype:'textfield',
							fieldLabel: 'Nombre',
							fieldStyle: 'margin-right: 110px;',
							name: 'name',
							allowBlank: false,
							value: contact.name
						}, {
							xtype:'textfield',
							fieldLabel: 'Identificación',
							name: 'identification',
							value: contact.identification,
							getSubmitValue: function(){
								var value = this.getValue();
								if(Ext.isEmpty(value)) {
									return null;
								}
								return value;
							}
						}, {
							xtype:'textfield',
							fieldLabel: 'Dirección',
							name: 'address',
							value: contact.address,
							getSubmitValue: function(){
								var value = this.getValue();
								if(Ext.isEmpty(value)) {
									return null;
								}
								return value;
							}
						}, {
							xtype:'textfield',
							fieldLabel: 'Correo electrónito',
							name: 'email',
							value: contact.email,
							getSubmitValue: function(){
								var value = this.getValue();
								if(Ext.isEmpty(value)) {
									return null;
								}
								return value;
							}
						}, {
							xtype:'textfield',
							fieldLabel: 'Teléfono 1',
							name: 'phonePrimary',
							value: contact.phonePrimary,
							getSubmitValue: function(){
								var value = this.getValue();
								if(Ext.isEmpty(value)) {
									return null;
								}
								return value;
							}
						}, {
							xtype:'textfield',
							fieldLabel: 'Teléfono 2',
							name: 'phoneSecondary',
							value: contact.phoneSecondary,
							getSubmitValue: function(){
								var value = this.getValue();
								if(Ext.isEmpty(value)) {
									return null;
								}
								return value;
							}
						}, {
							xtype:'textfield',
							fieldLabel: 'Fax',
							name: 'fax',
							value: contact.fax,
							getSubmitValue: function(){
								var value = this.getValue();
								if(Ext.isEmpty(value)) {
									return null;
								}
								return value;
							}
						}, {
							xtype:'textfield',
							fieldLabel: 'Celular',
							name: 'mobile',
							value: contact.mobile,
							getSubmitValue: function(){
								var value = this.getValue();
								if(Ext.isEmpty(value)) {
									return null;
								}
								return value;
							}
						}]
					},{
						items: [{
							xtype: 'combobox',
							fieldLabel: 'Lista de precios',
							store: Ext.create('Ext.data.Store', {
							fields: ['id', 'name'],
							data: [{
							   }]
							}),
							getSubmitValue: function(){
								var value = this.getValue();
								if(Ext.isEmpty(value)) {
									return null;
								}
								return value;
							},
							valueField: 'id',
							displayField: 'name',
							name: 'priceList'
						   }, {
							xtype: 'combobox',
							fieldLabel: 'Vendedor',
							store: Ext.create('Ext.data.Store', {
							fields: ['id', 'name'],
							data: [{
							   }]
							}),
							getSubmitValue: function(){
								var value = this.getValue();
								if(Ext.isEmpty(value)) {
									return null;
								}
								return value;
							},
							valueField: 'id',
							displayField: 'name',
							name: 'seller'
						   }, {
							xtype: 'combobox',
							fieldLabel: 'Términos de pago',
							store: Ext.create('Ext.data.Store', {
							fields: ['id', 'name'],
							data: [{
							   }]
							}),
							getSubmitValue: function(){
								var value = this.getValue();
								if(Ext.isEmpty(value)) {
									return null;
								}
								return value;
							},
							valueField: 'id',
							displayField: 'name',
							name: 'term'
						   }, {
							  xtype: 'fieldcontainer',
							  fieldLabel: 'Tipo de Contacto',
							  defaultType: 'checkboxfield',
							  items: [{
								 boxLabel: 'Cliente',
								 inputValue: 'client',
								 id: 'client',
								 name: 'type'
							  },{
								 boxLabel: 'Proveedor',
								 inputValue: 'provider',
								 id: 'provider',
								 name: 'type'
							  }]
						   },{
							  xtype: 'textarea',
							  fieldLabel: 'Observaciones',
							  name: 'observations',
							value: contact.observations,
								getSubmitValue: function(){
									var value = this.getValue();
									if(Ext.isEmpty(value)) {
										return null;
									}
									return value;
								}
						   }]
					}],

					// Reset and Submit buttons
					buttons: [{
						text: 'Limpiar',
						handler: function() {
							this.up('form').getForm().reset();
						}
					}, {
						text: 'Actualizar',
						formBind: true, //only enabled once the form is valid
						disabled: true,
						id: 'submit-add-contact',
						handler: function() {
							var form = this.up('form').getForm();
							if (form.isValid()) {
								var data = JSON.stringify(form.getValues());

								Ext.Ajax.request({
									headers: {'authorization' : 'Basic ' + btoa(AL.config.EMAIL + ':' + AL.config.TOKEN)},
									params : data,
									url: 'https://app.alegra.com/api/v1/contacts/' + contact.id,
									method: 'PUT',
									success: function(conn, response, options, eOpts) {
										location.href = "view.html?id="+ contact.id;
									},
									failure: function(conn, response, options, eOpts) {
										alert(JSON.parse(conn.responseText).message);
									}
								});
							}
						}
					}]
					});

				},
				failure: function(conn, response, options, eOpts) {
					alert(conn.responseText);
				}
			});
		}
		else {
			Ext.create('Ext.form.Panel', {
			bodyStyle: 'padding: 30px;padding-left: 200px;',
			xtype: 'form',
			header: false,
			renderTo: 'addClient',
			layout:'column',
			url: 'https://app.alegra.com/api/v1/contacts',
			defaults: {
				  xtype: 'container',
				  anchor: '100%'
			   },
			defaultType: 'textfield',
			items:[{
				items: [{
					xtype:'textfield',
					fieldLabel: 'Nombre',
					fieldStyle: 'margin-right: 110px;',
					name: 'name',
					allowBlank: false
				}, {
					xtype:'textfield',
					fieldLabel: 'Identificación',
					name: 'identification',
					getSubmitValue: function(){
						var value = this.getValue();
						if(Ext.isEmpty(value)) {
							return null;
						}
						return value;
					}
				}, {
					xtype:'textfield',
					fieldLabel: 'Dirección',
					name: 'address',
					getSubmitValue: function(){
						var value = this.getValue();
						if(Ext.isEmpty(value)) {
							return null;
						}
						return value;
					}
				}, {
					xtype:'textfield',
					fieldLabel: 'Correo electrónito',
					name: 'email',
					getSubmitValue: function(){
						var value = this.getValue();
						if(Ext.isEmpty(value)) {
							return null;
						}
						return value;
					}
				}, {
					xtype:'textfield',
					fieldLabel: 'Teléfono 1',
					name: 'phonePrimary',
					getSubmitValue: function(){
						var value = this.getValue();
						if(Ext.isEmpty(value)) {
							return null;
						}
						return value;
					}
				}, {
					xtype:'textfield',
					fieldLabel: 'Teléfono 2',
					name: 'phoneSecondary',
					getSubmitValue: function(){
						var value = this.getValue();
						if(Ext.isEmpty(value)) {
							return null;
						}
						return value;
					}
				}, {
					xtype:'textfield',
					fieldLabel: 'Fax',
					name: 'fax',
					getSubmitValue: function(){
						var value = this.getValue();
						if(Ext.isEmpty(value)) {
							return null;
						}
						return value;
					}
				}, {
					xtype:'textfield',
					fieldLabel: 'Celular',
					name: 'mobile',
					getSubmitValue: function(){
						var value = this.getValue();
						if(Ext.isEmpty(value)) {
							return null;
						}
						return value;
					}
				}]
			},{
				items: [{
					xtype: 'combobox',
					fieldLabel: 'Lista de precios',
					store: Ext.create('Ext.data.Store', {
					fields: ['id', 'name'],
					data: [{
					   }]
					}),
					getSubmitValue: function(){
						var value = this.getValue();
						if(Ext.isEmpty(value)) {
							return null;
						}
						return value;
					},
					valueField: 'id',
					displayField: 'name',
					name: 'priceList'
				   }, {
					xtype: 'combobox',
					fieldLabel: 'Vendedor',
					store: Ext.create('Ext.data.Store', {
					fields: ['id', 'name'],
					data: [{
					   }]
					}),
					getSubmitValue: function(){
						var value = this.getValue();
						if(Ext.isEmpty(value)) {
							return null;
						}
						return value;
					},
					valueField: 'id',
					displayField: 'name',
					name: 'seller'
				   }, {
					xtype: 'combobox',
					fieldLabel: 'Términos de pago',
					store: Ext.create('Ext.data.Store', {
					fields: ['id', 'name'],
					data: [{
					   }]
					}),
					getSubmitValue: function(){
						var value = this.getValue();
						if(Ext.isEmpty(value)) {
							return null;
						}
						return value;
					},
					valueField: 'id',
					displayField: 'name',
					name: 'term'
				   }, {
					  xtype: 'fieldcontainer',
					  fieldLabel: 'Tipo de Contacto',
					  defaultType: 'checkboxfield',
					  items: [{
						 boxLabel: 'Cliente',
						 inputValue: 'client',
						 id: 'client',
						 name: 'type'
					  },{
						 boxLabel: 'Proveedor',
						 inputValue: 'provider',
						 id: 'provider',
						 name: 'type'
					  }]
				   },{
					  xtype: 'textarea',
					  fieldLabel: 'Observaciones',
					  name: 'observations',
						getSubmitValue: function(){
							var value = this.getValue();
							if(Ext.isEmpty(value)) {
								return null;
							}
							return value;
						}
				   }]
			}],

			// Reset and Submit buttons
			buttons: [{
				text: 'Limpiar',
				handler: function() {
					this.up('form').getForm().reset();
				}
			}, {
				text: 'Guardar',
				formBind: true, //only enabled once the form is valid
				disabled: true,
				id: 'submit-add-contact',
				handler: function() {
					var form = this.up('form').getForm();
					if (form.isValid()) {
						var data = JSON.stringify(form.getValues());

						Ext.Ajax.request({
							headers: {'authorization' : 'Basic ' + btoa(AL.config.EMAIL + ':' + AL.config.TOKEN)},
							params : data,
							url: 'https://app.alegra.com/api/v1/contacts',
							method: 'POST',
							success: function(conn, response, options, eOpts) {
								location.href = "index.html";
							},
							failure: function(conn, response, options, eOpts) {
								alert(JSON.parse(conn.responseText).message);
							}
						});
					}
				}
			}]
			});
		}
	}
    });

</script>


                </div>

            </div>

            
            <script>
                Ext.onReady(function () {
                });
            </script>
        </div>
    </body>
</html>

